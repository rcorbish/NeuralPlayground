<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Table</title>
<link href='https://fonts.googleapis.com/css?family=Roboto+Condensed'
	rel='stylesheet' type='text/css'>
<style>
html {
	font-family: 'Roboto Condensed', sans-serif;
	color: #002929;
}

.close-icon {
	position: absolute;
	left: 3px;
	top: 3px;
	z-index: 1;
}

.pause-icon {
	position: absolute;
	left: 33px;
	top: 3px;
	z-index: 1;
}

.grid-menu {
	position: absolute;
	left: 0;
	top: 0;
	bottom: 0;
	width: 100px;
	background-color: #13073A;
	z-index: 0;
}

.grid-workspace {
	position: absolute;
	left: 100px;
	top: 0;
	bottom: 0;
	right: 0;
	background-color: #262527;
	z-index: 1;
}

.grid-icon {
	position: relative;
	width: 50px;
	height: 50px;
	margin: 25px;
	background-color: #615192;
	text-align: center;
}

.grid-open {
	position: absolute;
	width: 100%;
	height: 100%;
	left: 0;
	background-color: #578585;
}

.report-title {
	position: absolute;
	left: 100px;
	top: 0 ;
	margin: 5px ;
}

.grid-open table {
	position: absolute ;
	top: 30px ;
	left: 0 ;
	width: 100% ;	
	margin: 0 ;
	border: solid 1px black ;
	border-collapse: collapse;
}
.grid-open th {
	text-align: left ;
	font-weight: bold ;
}
</style>

</head>
<body>

	<div id='menu' class='grid-menu'>
		<div id='grid1' data-index='1' data-report-name='Rpt1.html'
			class='grid-icon'></div>
		<div id='grid2' data-index='2' data-report-name='2' class='grid-icon'></div>
		<div id='grid3' data-index='3' data-report-name='3' class='grid-icon'></div>
		<div id='grid4' data-index='4' data-report-name='4' class='grid-icon'></div>
		<div id='grid5' data-index='5' data-report-name='5' class='grid-icon'></div>
	</div>
	<div id="workspace" class='grid-workspace'></div>

	<table class='grid'></table>

	<script>
function loadPage( grid, f ) {
	var xhr = new XMLHttpRequest() ;
	xhr.onreadystatechange = function() {		
	    if (xhr.readyState == 4 ) {
	    	if( xhr.status == 200) {
	    		grid.innerHTML = xhr.responseText;
				var scripts = grid.getElementsByTagName('script')
				for (var i = 0; i < scripts.length; i++) {
				    eval( scripts[i].innerHTML )
				}
			} else {
				grid.innerHTML = "<p class='report-title'>Error loading report: " + xhr.statusText + "</p>";
			}
		    var closeIcon = document.createElement( "img" ) ;
		    closeIcon.className = "close-icon" ;
		    closeIcon.src = "data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ0IDQ0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA0NCA0NCIgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCI+CiAgPHBhdGggZD0ibTIyLDBjLTEyLjIsMC0yMiw5LjgtMjIsMjJzOS44LDIyIDIyLDIyIDIyLTkuOCAyMi0yMi05LjgtMjItMjItMjJ6bTMuMiwyMi40bDcuNSw3LjVjMC4yLDAuMiAwLjMsMC41IDAuMywwLjdzLTAuMSwwLjUtMC4zLDAuN2wtMS40LDEuNGMtMC4yLDAuMi0wLjUsMC4zLTAuNywwLjMtMC4zLDAtMC41LTAuMS0wLjctMC4zbC03LjUtNy41Yy0wLjItMC4yLTAuNS0wLjItMC43LDBsLTcuNSw3LjVjLTAuMiwwLjItMC41LDAuMy0wLjcsMC4zLTAuMywwLTAuNS0wLjEtMC43LTAuM2wtMS40LTEuNGMtMC4yLTAuMi0wLjMtMC41LTAuMy0wLjdzMC4xLTAuNSAwLjMtMC43bDcuNS03LjVjMC4yLTAuMiAwLjItMC41IDAtMC43bC03LjUtNy41Yy0wLjItMC4yLTAuMy0wLjUtMC4zLTAuN3MwLjEtMC41IDAuMy0wLjdsMS40LTEuNGMwLjItMC4yIDAuNS0wLjMgMC43LTAuM3MwLjUsMC4xIDAuNywwLjNsNy41LDcuNWMwLjIsMC4yIDAuNSwwLjIgMC43LDBsNy41LTcuNWMwLjItMC4yIDAuNS0wLjMgMC43LTAuMyAwLjMsMCAwLjUsMC4xIDAuNywwLjNsMS40LDEuNGMwLjIsMC4yIDAuMywwLjUgMC4zLDAuN3MtMC4xLDAuNS0wLjMsMC43bC03LjUsNy41Yy0wLjIsMC4xLTAuMiwwLjUgMy41NTI3MWUtMTUsMC43eiIgZmlsbD0iIzI2MTc1OCIvPgo8L3N2Zz4K" ;
		    closeIcon.onclick = f.bind( grid ) ; 
		    grid.appendChild( closeIcon ) ;
		}
	} ;
	xhr.open("GET", grid.dataset.reportName, true);
	xhr.send();
}

function setupGridTable( grid ) {
	var f = function(e) {
		setupGridIcon( this ) ;
		var menu = document.getElementById( "menu" ) ;
		var icons = menu.querySelectorAll( ".grid-icon" ) ;
		var icon = null ;
		var index = this.dataset.index ;
		for( var i=0 ; i<icons.length ; i++ ) {
			if( icons[i].dataset.index > index ) {
				icon = icons[i] ;
				break ;
			}
		}
		menu.insertBefore( this, icon ) ;		
		e.preventDefault() ;
		e.stopImmediatePropagation()
		return false ;
	} ;

	loadPage( grid, f ) ;
	grid.className = "grid-open" ;
	grid.onclick = null ; 
}

function setupGridIcon( grid ) {
	var f = function(e) {
		setupGridTable( this ) ;
		var workspace = document.getElementById( "workspace" ) ;
		workspace.appendChild( this ) ;		
	} ;
	
	grid.innerHTML = grid.dataset.reportName ;
	grid.className = "grid-icon" ;
	grid.onclick = f.bind( grid ) ; 
}

var grids = document.querySelectorAll( ".grid-icon" ) ;
for( var i=0 ; i<grids.length ; i++ ) {
	var grid = grids[i] ;
	setupGridIcon( grid ) ;
}
</script>
</body>
</html>